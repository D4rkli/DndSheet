<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DnD Sheet</title>

  <link rel="stylesheet" href="styles.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
<div class="wrap">

  <h1>DnD Sheet</h1>
  <div id="status" class="muted">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ‚Ä¶</div>

  <!-- ===================== -->
  <!-- üßô –≠–ö–†–ê–ù 1: –ü–ï–†–°–û–ù–ê–ñ–ò -->
  <!-- ===================== -->
  <div id="listScreen" class="card">
    <h2>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</h2>

    <div class="row">
      <input id="newName" placeholder="–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞" />
      <button id="createBtn">–°–æ–∑–¥–∞—Ç—å</button>
    </div>

    <ul id="chars"></ul>
  </div>

  <!-- ===================== -->
  <!-- üßô‚Äç‚ôÇÔ∏è –≠–ö–†–ê–ù 2: –ü–ï–†–°–û–ù–ê–ñ -->
  <!-- ===================== -->
  <div id="characterScreen" class="card" style="display:none">
    <button class="btn-ghost" onclick="backToList()">‚Üê –ù–∞–∑–∞–¥</button>

    <h2 id="charTitle"></h2>
    <div id="charMeta" class="muted"></div>

    <!-- ‚ù§Ô∏è –†–ï–°–£–†–°–´ (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ) -->
    <div class="resources">

      <div class="resource" onclick="openResourceEditor('hp')">
        <div class="resource-top">
          <span class="resource-name">‚ù§Ô∏è HP</span>
          <span id="hpText" class="resource-value"></span>
        </div>
        <div class="progress">
          <div id="hpBar" class="progress-bar hp"></div>
          <div class="progress-text" id="hpTextOnBar"></div>
        </div>
      </div>

      <div class="resource" onclick="openResourceEditor('mana')">
        <div class="resource-top">
          <span class="resource-name">üîµ –ú–∞–Ω–∞</span>
          <span id="manaText" class="resource-value"></span>
        </div>
        <div class="progress">
          <div id="manaBar" class="progress-bar mana"></div>
          <div class="progress-text" id="manaTextOnBar"></div>
        </div>
      </div>

      <div class="resource" onclick="openResourceEditor('energy')">
        <div class="resource-top">
          <span class="resource-name">‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
          <span id="energyText" class="resource-value"></span>
        </div>
        <div class="progress">
          <div id="energyBar" class="progress-bar energy"></div>
          <div class="progress-text" id="energyTextOnBar"></div>
        </div>
      </div>

    </div>

    <!-- üì¶ –í–ö–õ–ê–î–ö–ò -->
    <div id="tabContent">
      <div id="tab-stats" class="tab-content"></div>

      <div id="tab-inventory" class="tab-content" style="display:none">
        <div class="inventory-header">
          <h3>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
          <button class="btn-icon" onclick="openItemEditor()">‚ûï</button>
        </div>
        <ul id="inventoryList" class="list"></ul>
      </div>

      <div id="tab-spells" class="tab-content" style="display:none">
        <p class="muted">–ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è –±—É–¥—É—Ç –ø–æ–∑–∂–µ</p>
      </div>
    </div>

    <!-- üìå –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
    <div id="bottomNav" class="bottom-nav" style="display:none">
      <button id="nav-stats" class="active" onclick="openTab('stats')">
        <span class="icon">üìä</span>
        <span class="label">–•–∞—Ä-–∫–∏</span>
      </button>
      <button id="nav-inventory" onclick="openTab('inventory')">
        <span class="icon">üéí</span>
        <span class="label">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
      </button>
      <button id="nav-spells" onclick="openTab('spells')">
        <span class="icon">‚ú®</span>
        <span class="label">–ú–∞–≥–∏—è</span>
      </button>
    </div>
  </div>

  <!-- ===================== -->
  <!-- üß© –≠–ö–†–ê–ù: –ü–†–ï–î–ú–ï–¢ -->
  <!-- ===================== -->
  <div id="itemEditor" class="card" style="display:none">
    <button class="btn-ghost" onclick="closeItemEditor()">‚Üê –ù–∞–∑–∞–¥</button>

    <h2 id="itemEditorTitle">–ü—Ä–µ–¥–º–µ—Ç</h2>

    <input id="editItemName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞" />
    <textarea id="editItemDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
    <textarea id="editItemStats" placeholder="–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏"></textarea>

    <button onclick="saveItem()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button id="deleteItemBtn" class="btn-danger" onclick="deleteItem()" style="display:none">
      üóë –£–¥–∞–ª–∏—Ç—å
    </button>
  </div>

  <!-- ===================== -->
  <!-- üß© –≠–ö–†–ê–ù: –†–ï–°–£–†–° -->
  <!-- ===================== -->
  <div id="resourceEditor" class="card" style="display:none">
    <button class="btn-ghost" onclick="closeResourceEditor()">‚Üê –ù–∞–∑–∞–¥</button>

    <h2 id="resourceEditorTitle">–†–µ—Å—É—Ä—Å</h2>

    <div class="field">
      <label>–¢–µ–∫—É—â–µ–µ</label>
      <div class="stepper">
        <button class="btn-step" onclick="stepResource(-1)">‚àí</button>
        <input id="resCurrent" type="number" />
        <button class="btn-step" onclick="stepResource(1)">+</button>
      </div>
    </div>

    <div class="field">
      <label>–ú–∞–∫—Å–∏–º—É–º</label>
      <input id="resMax" type="number" />
    </div>

    <div class="field">
      <label>–ü—Ä–∏–±–∞–≤–∫–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å</label>
      <input id="resPerLevel" type="number" />
    </div>

    <button onclick="saveResource()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </div>

</div>

<script src="app.js?v=2"></script>
</body>
</html>
